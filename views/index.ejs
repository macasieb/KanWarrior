<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Task Management</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">
    <link href="css/style.css" rel="stylesheet">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.2/jquery.min.js"></script>
  </head>
  <body>
      <nav class="navbar navbar-inverse navbar-fixed-top">
          <div class="container-fluid header">
              <div class="head-row">
                  <div class="col-md-2">
                      <h1 class="title">KanWarrior</h1>
                  </div>
                  <div class="col-md-10">
                      <form action="/sync" method="post" class="navbar-form">
                          <input  type="submit" class="btn btn-primary" formaction="/sync" value="Synchronize">
                      </form>
                      <form class="form-inline filter-form navbar-form" action="/" method="get">
                          <button type="button" class="btn btn-primary add-task">Add Task</button>
                          <input type="submit" class="btn btn-primary" value="Filter Tasks">
                          <div class="form-group">
                              <select name="projects">
                                  <% for(var i=0; i<projects.length; i++) {%>
                                  <option><%= projects[i] %></option>
                                  <% } %>
                              </select>
                          </div>
                          <% for(var i=0; i<tags.length; i++) {%>
                          <div class="checkbox tag-checkbox">
                              <label>
                                  <input type="checkbox" class="checkbox-input" name="tags" value="<%= tags[i] %>"><%= tags[i] %><br>
                              </label>
                          </div>
                          <% } %>
                      </form>
                  </div>
              </div>
          </div>
      </nav>

      <div class="container main center">
        <div class="centerBlock">
            <%if (CalDAVinfo != null) { %>
            <div id="calDAV" class="alert alert-success" role="alert">
                <%= CalDAVinfo %>
                <!--<button type="button" class="hide-alert btn btn-danger btn-xs" onclick="hide()">Close</button>-->
                <button type="button"  onclick="hide()" class="close" aria-label="Close"><span aria-hidden="true">&times;</span></button>
            </div>
            <% } %>




            <!--<button class="btn btn-primary pull-right" id="add_new_board">Add Board</button>-->
            <!--<button class="btn btn-primary add-task">Add Task</button>-->
            <div class="wrapper row no-margin" id="boards_container"></div>

            <div class="overlay">
              <div class="popup">
                <button id="close_popup" class="btn btn-xs">x</button>

                <h2 class="add-board-form-title inactive">Add New Board</h2>
                <form id="add_board_form" class="inactive">
                  <div class="form-group">
                    <label for="add_board_name">Add Board Name</label>
                    <input type="text" class="form-control" id="add_board_name" placeholder="Board Name">
                  </div>
                  <button type="submit" class="btn btn-primary">Add Board</button>
                </form>

                  <!--//&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;-->

                <h2 id="task-title" class="add-task-form-title inactive">Add New Task</h2>
                <form id="add_task_form" class="inactive" action="/new_task" method="post">
                  <div class="form-group">
                      <label for="add_task_desc">Task Description</label>
                      <textarea class="form-control" id="add_task_desc" placeholder="Task Description" name="description" required></textarea>

                      <label for="add_task_due_date">Due date</label>
                      <input type="date" class="form-control" id="add_task_due_date" placeholder="" name="due">
                      <small>Date format: YYYY-MM-DD</small><br>

                      <label for="add_task_priority">Priority</label>
                      <select class="form-control" id="add_task_priority" name="priority">
                          <option></option>
                          <option>H</option>
                          <option>M</option>
                          <option>L</option>
                      </select>
                      <br>

                      <label for="add_task_project">Project</label>
                      <input type="text" class="form-control" id="add_task_project" placeholder="" name="project">

                      <label for="add_task_tags">Tags</label>
                      <input type="text" class="form-control" id="add_task_tags" placeholder="" name="tags">
                      <small>Add space between multiple tags</small>
                  </div>
                  <input type="hidden" id="task-id" name="id" />
                  <input type="hidden" id="parent_board" />
                  <input type="hidden" id="edit_task" value="false" />
                  <input type="hidden" id="edit_task_index" />
                  <button id="task-submit" type="submit" class="btn btn-primary">Add Task</button>
                </form>

              </div>
            </div>
        </div>
    </div>

      <script type="text/html" id="task_template">
      <div class="panel panel-default">
          <div class="panel-heading" onclick="toggleExtraInfo('::block-id::')">
              <h3 class="panel-title task-title"><b style="float: left">::TaskId::. </b>::TaskDesc::</h3>
          </div>
          <div class="panel-body ::block-id::">
              <!--ID: ::TaskId::-->
              <!--<div>Created: ::TaskEntry::</div>-->
              <div>Urgency: ::TaskUrgency::</div>
          </div>
          <div class="extra-info ::block-id::">
              <ul class="list-group">
                  <li class="list-group-item">Urgency: ::TaskUrgency::</li>
                  <li class="list-group-item">Status: ::TaskStatus::</li>
                  <li class="list-group-item">Entry: ::TaskEntry::</li>
                  <li class="list-group-item">Project: ::TaskProject::</li>
                  <li class="list-group-item">Due: ::TaskDue::</li>
                  <li class="list-group-item">Priority: ::TaskPriority::</li>
                  <li class="list-group-item">Tags: ::TaskTags::</li>
              </ul>
          </div>
          <div class="btn-group task-actions" role="group" aria-label="...">
              <button class="btn btn-default edit-task">Edit</button>
              <button class="btn btn-default delete-task">Delete</button>
          </div>
      </div>
      </script>

    <!--<script type="text/html" id="task_template">-->
      <!--<div class="task-body">-->
          <!--<h4 class="task-title">::TaskDesc::</h4>-->

          <!--<p>ID: ::TaskId::</p>-->
          <!--&lt;!&ndash;<p>Status: ::TaskStatus::</p>&ndash;&gt;-->
          <!--<p>Entry: ::TaskEntry::</p>-->
          <!--&lt;!&ndash;<p>Project: ::TaskProject::</p>&ndash;&gt;-->
          <!--&lt;!&ndash;<p>Due: ::TaskDue::</p>&ndash;&gt;-->
          <!--&lt;!&ndash;<p>Urgency: ::TaskUrgency::</p>&ndash;&gt;-->
          <!--&lt;!&ndash;<p>Priority: ::TaskPriority::</p>&ndash;&gt;-->
          <!--&lt;!&ndash;<p>Tags: ::TaskTags::</p>&ndash;&gt;-->
      <!--</div>-->
      <!--<div class="task-actions">-->
          <!--<button class="btn btn-xs edit-task">Edit</button>-->
          <!--<button class="btn btn-xs delete-task">Delete</button>-->
      <!--</div>-->
    <!--</script>-->
      <script type="text/html" id="board_template">
      <div class="panel panel-primary">
          <div class="panel-heading">
              <h3 class="panel-title board-title">::BoardName::</h3>
          </div>
          <div class="panel-body">
              <ul class="task-items" ondrop="MyApp.drop(event)" ondragover="MyApp.allowDrop(event)">
              </ul>
          </div>
      </div>
      </script>

    <!--<script type="text/html" id="board_template">-->
      <!--<h3 class="board-title">::BoardName::</h3>-->
      <!--<ul class="task-items" ondrop="MyApp.drop(event)" ondragover="MyApp.allowDrop(event)">-->
      <!--</ul>-->
    <!--</script>-->

    <script src="js/script.js"></script>
    <script src="js/helper.js"></script>
    <script type="text/javascript">
        var tasksList = JSON.parse(htmlDecode("<%= JSON.stringify(tasks) %>"));
    </script>


  </body>
</html>
